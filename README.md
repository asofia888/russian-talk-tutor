# Russian Talk Tutor - 使用説明書

## 概要

「Russian Talk Tutor」は、GoogleのGemini AIを活用して、日本語話者がロシア語の会話をリアルなシナリオで練習できるウェブアプリケーションです。3000語の習得を目標に、初心者から上級者まで、自分のレベルに合ったトピックを選び、実践的な会話力と語彙力を身につけることを目指します。

## 主な機能

- **AIによる会話生成**: 豊富なトピックから、自然で実用的な会話文を動的に生成します。
- **カスタムトピック生成**: 自分の好きなテーマで、オリジナルの会話シナリオを生成できます。
- **ロールプレイ機能**: AIを相手に会話の登場人物になりきって、マイクを使った発音練習ができます。
- **SRS（間隔反復システム）単語帳**: 科学的な学習法に基づき、忘却曲線に合わせて最適なタイミングで単語を復習できます。
- **音声再生**: 全てのロシア語のセリフや単語を、正しい発音で何度でも聞くことができます。再生速度の調整も可能です。
- **文法解説**: 会話に出てくる重要な文法ポイントを、例文付きで分かりやすく解説します。
- **オフライン対応**: 一度表示した会話は自動でキャッシュされ、インターネット接続がない環境でも学習を続けられます。

---

## 使い方

### 1. トピックの選択

1.  アプリを開くと、まずトピック選択画面が表示されます。
2.  「初級」「中級」「上級」のカテゴリから、興味のある会話トピックを選んでクリックします。
3.  オフラインで利用可能なトピックには雲のアイコン（☁️）が表示されます。
4.  クリックすると、AIがそのトピックに沿った会話の生成を開始します。

#### カスタムトピックの生成
- 画面上部の「カスタムトピックを生成」セクションで、あなたが練習したい会話のテーマを自由に入力します。（例：美術館で絵画について話す）
- 「会話を生成」ボタンを押すと、AIがそのテーマに沿ったオリジナルの会話シナリオを即座に作成します。

### 2. 会話の学習

- **読む・聞く**: 生成された会話がカード形式で表示されます。ロシア語、発音（ルビ）、日本語訳を読んで内容を理解しましょう。各カードの右にある▶️ボタンを押すと、ロシア語の音声を再生できます。
- **単語を覚える**: 各カードの下には、そのセリフで使われている単語が表示されています。
    - 単語の右にある⭐アイコンをタップすると、「単語帳」にお気に入り登録できます。単語はSRS（間隔反復システム）のレビューキューに追加されます。
    - もう一度タップすると、登録を解除できます。
- **文法を学ぶ**: セリフの右側に💡（電球）アイコンが表示されている場合、そのセリフには重要な文法ポイントが含まれています。アイコンをクリックすると、詳しい解説と例文が表示されます。

### 3. ロールプレイで実践練習

1.  会話画面の上部にある緑色の「ロールプレイを開始」ボタンを押します。
2.  会話の登場人物（例：「Aさん」「Bさん」）が表示されるので、練習したい役を選択します。
3.  ロールプレイが始まります。AIが相手役のセリフを話し終えると、あなたの番になります。
4.  画面に表示されるお手本のセリフを参考に、マイクボタン🎤を押してあなたの声でセリフを読み上げてください。
5.  録音が終わると、AIがあなたの発音を評価し、具体的なフィードバックを返します。
6.  会話が最後まで進むと、ロールプレイは終了です。「終了する」ボタンでいつでも中断できます。

### 4. 単語帳で復習（SRS）

1.  画面上部のヘッダーにある📖「単語帳」をクリックします。ヘッダーのバッジは、その日にレビューすべき単語の数を示しています。
2.  **単語レビュー**:
    - その日に復習すべき単語が、フラッシュカード形式で1枚ずつ表示されます。
    - まずロシア語が表示されるので、意味と発音を思い出してみましょう。
    - 「答えを見る」ボタンを押すと、答えが表示されます。
    - 自分の理解度に応じて、「もう一度」「普通」「簡単」のいずれかのボタンを押して評価します。
    - この評価に基づいて、アプリが最適な次の復習日を自動で計算します。
    - キューにある単語をすべてレビューすると、その日の学習は完了です。
3.  **学習済みの全単語**:
    - レビューセクションの下には、お気に入り登録したすべての単語がリストで表示されます。
    - ここでは、各単語の次の復習予定日を確認したり、リストから単語を完全に削除したりできます。

### 5. 音声設定

画面上部のヘッダーにある⚙️（歯車）アイコンをクリックすると、設定画面が開きます。
ここでは、音声読み上げの声の種類や、再生速度を自分好みに調整することができます。

---

## 公開とデプロイ

### PWAとオフライン機能

本アプリケーションは、プログレッシブウェブアプリ（PWA）として、オフラインでも利用できる機能を搭載しています。

- **オフラインでの学習**: 一度でも表示した会話トピックは、お使いのデバイスにキャッシュされます。これにより、インターネット接続がない環境でも、そのトピックの学習を続けられます。（カスタムトピックはキャッシュされません）
- **利用可能なトピックの確認**: トピック選択画面で、オフラインで利用可能なトピックには雲のアイコン（☁️）が表示されます。
- **ホーム画面に追加**: 対応しているブラウザ（Chrome, Safariなど）では、「ホーム画面に追加」機能を使って、本アプリを通常のアプリのようにインストールできます。これにより、デスクトップやスマートフォンのホームからワンタップで起動できるようになります。

### Vercelでのデプロイガイド

本アプリケーションは、Vercel Serverless Functionsを使用してAPIキーを安全に管理しながらデプロイできます。

#### 前提条件
- Google Gemini APIキーを取得していること（[Google AI Studio](https://makersuite.google.com/app/apikey)から取得可能）
- GitHubアカウントを持っていること
- Vercelアカウントを持っていること（無料）

#### デプロイ手順

1.  **リポジトリの準備**
    - このリポジトリを、ご自身のGitHubアカウントにフォーク（Fork）またはプッシュしてください。

2.  **Vercelプロジェクトの作成**
    - [Vercel](https://vercel.com/)にログインし、「Add New...」→「Project」を選択します。
    - 先ほど準備したGitHubリポジトリをインポートします。

3.  **プロジェクトの設定**
    - **Framework Preset**: `Vite` が自動で検出されます。
    - **Build Settings**:
      - Build Command: `npm run build`（自動設定）
      - Output Directory: `dist`（自動設定）
    - 変更が不要な場合はそのままで構いません。

4.  **環境変数の設定（重要）**
    - プロジェクト設定の「Environment Variables」セクションを開きます。
    - 以下の環境変数を追加します：
      ```
      GEMINI_API_KEY=あなたのGemini APIキー
      ```
    - Environment（本番、プレビュー、開発）すべてにチェックを入れることをお勧めします。

5.  **デプロイ**
    - 「Deploy」ボタンをクリックします。
    - デプロイが開始され、数分で完了します。
    - デプロイが成功すると、アプリケーションのURLが表示されます。

#### セキュリティ上の注意事項

このアプリケーションは、**Vercel Serverless Functions**を使用してAPIキーをバックエンドで安全に管理します。

- **`/api`** ディレクトリ配下のファイルは、サーバーサイドで実行されます
- APIキーはクライアント側のコードに含まれません
- ブラウザのDevToolsからAPIキーを確認することはできません
- すべてのGemini API呼び出しは、サーバー側のプロキシ経由で行われます

**重要**: `.env.local`や`.env`ファイルは開発用です。本番環境では必ずVercelの環境変数設定を使用してください。これらのファイルは`.gitignore`に含まれており、GitHubにプッシュされません。

#### ローカル開発環境のセットアップ

ローカルで開発する場合は、以下の手順を実行してください：

1.  **依存関係のインストール**
    ```bash
    npm install
    ```

2.  **環境変数の設定**
    - プロジェクトルートに `.env.local` ファイルを作成
    - 以下の内容を記述：
      ```
      GEMINI_API_KEY=あなたのGemini APIキー
      ```

3.  **開発サーバーの起動**
    ```bash
    npm run dev
    ```
    - Viteの開発サーバーが `http://localhost:5173` で起動します
    - APIプロキシは自動的に `http://localhost:3000` に転送されます（Vercel Dev Serverを別途起動する必要はありません）

#### トラブルシューティング

- **APIエラーが発生する場合**: Vercelの環境変数が正しく設定されているか確認してください
- **ビルドエラーが発生する場合**: `package.json`の依存関係が正しくインストールされているか確認してください
- **オフライン機能が動作しない場合**: HTTPSでアクセスしているか確認してください（Service WorkerはHTTPSが必要）

---

## プライバシーポリシーと免責事項

本アプリケーションは、ユーザーの音声データなどをGoogleのAPIに送信します。ご利用にあたっては、アプリ内のフッターからアクセスできる「プライバシーポリシー」と「免責事項」を必ずお読みください。